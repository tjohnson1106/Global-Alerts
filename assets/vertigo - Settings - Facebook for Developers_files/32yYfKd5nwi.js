if (self.CavalryLogger) { CavalryLogger.start_js(["CaPPY"]); }

__d("LitestandStoryInsertionStatus",["ArbiterMixin"],(function(a,b,c,d,e,f){var g="check";a={registerBlocker:function(a){return this.subscribe(g,function(b,c){c.can_insert&&a()&&(c.can_insert=!1)})},canInsert:function(){var a={can_insert:!0};this.inform(g,a);return a.can_insert}};Object.assign(a,b("ArbiterMixin"));e.exports=a}),null);
__d("YouTube",["cx","CSS","DOM","DOMQuery","Event","Focus","Keys","LitestandStoryInsertionStatus","SubscriptionsHandler","UserAgent_DEPRECATED"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,c,d){"use strict";var e=new(b("SubscriptionsHandler"))();e.addSubscriptions(b("Event").listen(a,"load",this.listening.bind(this)),b("LitestandStoryInsertionStatus").registerBlocker(function(){return this.playerState===h.STATE_PLAYING}.bind(this)));Object.assign(this,{iframe:a,autofocus:c,autoplay:d,playerState:h.STATE_UNSTARTED,muted:!1,volume:100,currentTime:0,timer:null,handler:e});c&&b("Focus").set(a)}h.prototype.id=function(){"use strict";return this.iframe.id};h.prototype.post=function(a){"use strict";a.id=this.id(),this.iframe.contentWindow.postMessage(JSON.stringify(a),"*")};h.prototype.listening=function(){"use strict";this.post({event:"listening"}),clearTimeout(this.timer),this.timer=setTimeout(this.listening.bind(this),100)};h.prototype.update=function(a){"use strict";a.event=="initialDelivery"&&(clearTimeout(this.timer),(b("UserAgent_DEPRECATED").webkit()||b("UserAgent_DEPRECATED").firefox())&&a.info&&a.info.debugText.match(/flashVersion/)&&(this.addAccessibleButtons(),b("UserAgent_DEPRECATED").firefox()&&(this.iframe.tabIndex=-1))),a.info&&["playerState","muted","volume","currentTime"].forEach(function(b){Object.prototype.hasOwnProperty.call(a.info,b)&&(this[b]=a.info[b])}.bind(this))};h.prototype.togglePlay=function(){"use strict";this.post({event:"command",func:this.playerState==h.STATE_PLAYING?"pauseVideo":"playVideo"})};h.prototype.toggleMute=function(){"use strict";this.post({event:"command",func:this.muted?"unMute":"mute"})};h.prototype.addAccessibleButtons=function(){"use strict";this.addAccessibleButton("Mute","_505m",this.toggleMute.bind(this)),this.addAccessibleButton("Play","_505n",this.togglePlay.bind(this))};h.prototype.addAccessibleButton=function(a,c,d){"use strict";__p&&__p();c=b("DOM").create("button",{"class":c,tabindex:0},a);b("DOM").insertAfter(this.iframe,c);this.handler.addSubscriptions(b("Event").listen(c,"click",d),b("Event").listen(c,"mouseover",b("CSS").hide.bind(null,c)),b("Event").listen(this.iframe,"mouseout",b("CSS").show.bind(null,c)),b("Event").listen(c,"focus",function(){!this.autoplay&&this.playerState==h.STATE_UNSTARTED&&(this.post({event:"command",func:"playVideo"}),this.post({event:"command",func:"pauseVideo"}))}.bind(this)),b("Event").listen(c,"keydown",function(a){switch(a.keyCode){case b("Keys").UP:case b("Keys").DOWN:this.post({event:"command",func:"setVolume",args:[this.volume+(a.keyCode==b("Keys").UP?10:-10)]});a.prevent();break;case b("Keys").RIGHT:case b("Keys").LEFT:this.post({event:"command",func:"seekTo",args:[this.currentTime+(a.keyCode==b("Keys").RIGHT?10:-10)]});a.prevent();break}}.bind(this)));return c};h.prototype.destroy=function(){"use strict";this.handler.release(),delete h.instances[this.id()],Object.keys(h.instances).length||h.handler.remove()};h.register=function(a,c,d){"use strict";if(!window.postMessage)return;Object.keys(h.instances).length||(h.handler=b("Event").listen(window,"message",function(a){try{a=JSON.parse(a.data);h.instances[a.id]&&h.instances[a.id].update(a)}catch(a){}}));a=new h(b("DOMQuery").find(a,"iframe"),c,d);h.instances[a.id()]=a};Object.assign(h,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=h}),null);
__d("isDevelopersURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getSubdomain()==="developers"}e.exports=a}),null);
__d("isOculusDotComURI",["URI"],(function(a,b,c,d,e,f){var g=new RegExp("(^|\\.)oculus\\.com$","i"),h=["https"];function a(a){if(a.isEmpty()&&a.toString()!=="#")return!1;return!a.getDomain()&&!a.getProtocol()?!1:h.indexOf(a.getProtocol())!==-1&&g.test(a.getDomain())}e.exports=a}),null);
__d("XRefererFrameController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/common/referer_frame.php",{})}),null);
__d("ControlledReferer",["Bootloader","DeferredCookie","URI","UserAgent","XRefererFrameController","isBonfireURI","isDevelopersURI","isMessengerDotComURI","isOculusDotComURI","lowerFacebookDomain"],(function(a,b,c,d,e,f){__p&&__p();var g={useFacebookReferer:function(a,c,d){__p&&__p();if(!b("DeferredCookie").canEmbedThirdPartyPixel()){b("Bootloader").loadModules(["BanzaiODS"],function(a){a.bumpEntityKey("defer_cookies","block_controlled_referer_iframe")},"ControlledReferer");return}var e=!1;function f(){if(e)return;var b=a.contentWindow.location.pathname;if(b!=="/intern/common/referer_frame.php"&&b!=="/common/referer_frame.php")return;e=!0;a.contentWindow.document.body.style.margin=0;c()}var g;b("isMessengerDotComURI")(b("URI").getRequestURI())||b("isBonfireURI")(b("URI").getRequestURI())?g=b("XRefererFrameController").getURIBuilder().getURI().toString():b("isOculusDotComURI")(b("URI").getRequestURI())?g="/common/referer_frame.php":!b("lowerFacebookDomain").isValidDocumentDomain()?g="/intern/common/referer_frame.php":b("UserAgent").isBrowser("Opera")&&!b("isDevelopersURI")(b("URI").getRequestURI())?g=b("XRefererFrameController").getURIBuilder().getURI().toString():g=b("XRefererFrameController").getURIBuilder().getURI().qualify().setProtocol("https").setSubdomain("staticxx").toString();d&&(g+="?fb_source="+d);a.onload=f;a.src=g},useFacebookRefererHtml:function(a,b,c){g.useFacebookReferer(a,function(){a.contentWindow.document.body.innerHTML=b},c)}};e.exports=g}),null);